<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>itired - –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-music"></i>
                    <h1>itired</h1>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-tab="dashboard" onclick="switchTab('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="#" class="nav-item" data-tab="search" onclick="switchTab('search')">
                    <i class="fas fa-search"></i>
                    <span>–ü–æ–∏—Å–∫</span>
                </a>
                <a href="#" class="nav-item" data-tab="playlists" onclick="switchTab('playlists')">
                    <i class="fas fa-list"></i>
                    <span>–ü–ª–µ–π–ª–∏—Å—Ç—ã</span>
                </a>
                <a href="#" class="nav-item" data-tab="liked" onclick="switchTab('liked')">
                    <i class="fas fa-heart"></i>
                    <span>–õ–∞–π–∫–∏</span>
                </a>
                <a href="#" class="nav-item" data-tab="stats" onclick="switchTab('stats')">
                    <i class="fas fa-chart-bar"></i>
                    <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                </a>
                <a href="#" class="nav-item" onclick="openThemesModal(); return false;">
                    <i class="fas fa-palette"></i>
                    <span>–¢–µ–º—ã</span>
                </a>

                <a href="#" class="nav-item" onclick="openSettingsModal(); return false;">
                    <i class="fas fa-cog"></i>
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <span class="username" id="sidebarUsername">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <span class="user-status">Online</span>
                    </div>
                    <button class="logout-btn" onclick="logout()" title="–í—ã–π—Ç–∏">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="content-header">
                <div class="header-left">
                    <button class="menu-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏...">
                    </div>
                </div>

                <div class="header-actions">
                    <div class="service-indicator">
                        <i id="currentServiceIcon" class="fab fa-yandex" title="–Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞"></i>
                    </div>

                    <div class="profile-mini">
                        <div class="user-avatar-mini" id="headerUserAvatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span class="username-mini" id="headerUsername">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <div class="profile-dropdown">
                            <a href="/profile" class="dropdown-item">
                                <i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å
                            </a>
                            <a href="#" class="dropdown-item" onclick="openModal('settingsModal')">
                                <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                            </a>
                        </div>
                    </div>

                    <button class="action-btn" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" onclick="openModal('notificationsModal')">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
            </header>

            <div class="content">
                <div id="dashboard" class="tab-content active">
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName">–î—Ä—É–≥</span>! üëã</h2>
                            <p>–ß—Ç–æ –±—É–¥–µ–º —Å–ª—É—à–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?</p>
                        </div>
                        <div class="welcome-stats">
                            <div class="stat">
                                <span class="stat-number" id="welcomeTracks">0</span>
                                <span class="stat-label">—Ç—Ä–µ–∫–æ–≤</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number" id="welcomePlaylists">0</span>
                                <span class="stat-label">–ø–ª–µ–π–ª–∏—Å—Ç–æ–≤</span>
                            </div>
                        </div>
                    </div>

                    <section class="section">
                        <div class="section-header">
                            <h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∞—Å</h3>
                            <button class="refresh-btn" onclick="loadDashboard()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="grid" id="recommendationsGrid">
                            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π...</div>
                        </div>
                    </section>

                    <section class="section">
                        <div class="section-header">
                            <h3>–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—à–∞–Ω–Ω–æ–µ</h3>
                            <button class="refresh-btn" onclick="loadDashboard()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="tracks-list" id="recentTracks">
                            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</div>
                        </div>
                    </section>
                </div>

                <div id="search" class="tab-content" style="display:none">
                    <div class="section">
                        <div class="section-header">
                            <h3>–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏</h3>
                        </div>
                        <div class="search-container">
                            <div class="search-box" style="max-width: 100%">
                                <i class="fas fa-search"></i>
                                <input type="text" id="searchInput"
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞, –∞–ª—å–±–æ–º–∞ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è...">
                                <button class="search-btn" onclick="performSearch()">–ù–∞–π—Ç–∏</button>
                            </div>
                        </div>
                        <div id="searchResults" class="search-results"></div>
                    </div>
                </div>

                <div id="playlists" class="tab-content" style="display:none">
                    <div class="section">
                        <div class="section-header">
                            <h3>–ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã</h3>
                            <div class="header-actions">
                                <button class="refresh-btn" onclick="loadPlaylists()">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="playlist-info">
                            <span id="playlistsCount"></span>
                        </div>
                        <div class="grid" id="playlistsGrid"></div>
                    </div>
                </div>

                <div id="liked" class="tab-content" style="display:none">
                    <div class="section">
                        <div class="section-header">
                            <h3>–õ–∞–π–∫–Ω—É—Ç—ã–µ —Ç—Ä–µ–∫–∏</h3>
                            <button class="refresh-btn" onclick="loadLikedTracks()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="playlist-info">
                            <span id="likedCount"></span>
                        </div>
                        <div class="tracks-list" id="likedTracks"></div>
                    </div>
                </div>

                <div id="stats" class="tab-content" style="display:none">
                    <div class="section">
                        <div class="section-header">
                            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è</h3>
                            <button class="refresh-btn" onclick="loadStats()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="stats-grid" id="statsGrid"></div>

                        <div class="section" style="margin-top: 30px">
                            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∂–∞–Ω—Ä–∞–º</h3>
                            <div id="genreChart" class="genre-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="player">
            <div class="player-main">
                <div class="player-track">
                    <div class="track-cover" id="playerCover">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="track-details">
                        <span class="track-title" id="currentTrack">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫</span>
                        <span class="track-artist" id="currentArtist">‚Äî</span>
                    </div>
                    <button class="action-btn" onclick="addToFavorites()" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>

                <div class="player-controls">
                    <button class="control-btn" onclick="toggleShuffle()" title="–ü–µ—Ä–µ–º–µ—à–∞—Ç—å">
                        <i class="fas fa-random"></i>
                    </button>
                    <button class="control-btn" onclick="previousTrack()" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="control-btn play-btn" onclick="togglePlay()" title="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–ü–∞—É–∑–∞">
                        <i class="fas fa-play" id="playIcon"></i>
                    </button>
                    <button class="control-btn" onclick="nextTrack()" title="–°–ª–µ–¥—É—é—â–∏–π">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="control-btn" onclick="toggleRepeat()" title="–ü–æ–≤—Ç–æ—Ä">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>

                <div class="player-progress">
                    <span class="time-display" id="currentTime">0:00</span>
                    <div class="progress-bar" onclick="seekTrack(event)">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="time-display" id="totalTime">0:00</span>
                </div>
            </div>

            <div class="player-volume">
                <i class="fas fa-volume-up"></i>
                <input type="range" id="volumeSlider" min="0" max="100" value="80" oninput="changeVolume(this.value)">
            </div>
        </footer>
    </div>

    <audio id="audioPlayer" hidden></audio>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button class="modal-close" onclick="closeModal('settingsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="settingsForm">
                    <div class="input-group">
                        <label for="themeSelect">–¢–µ–º–∞:</label>
                        <select id="themeSelect" name="theme">
                            <option value="dark">–¢–µ–º–Ω–∞—è</option>
                            <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                            <option value="auto">–°–∏—Å—Ç–µ–º–Ω–∞—è</option>
                            <option value="blue">–°–∏–Ω—è—è</option>
                            <option value="green">–ó–µ–ª–µ–Ω–∞—è</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="languageSelect">–Ø–∑—ã–∫:</label>
                        <select id="languageSelect" name="language">
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="musicService">–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å:</label>
                        <select id="musicService" name="music_service">
                            <option value="yandex">–Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞</option>
                            <option value="vk">VK –ú—É–∑—ã–∫–∞</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoPlayToggle" name="auto_play">
                            <span>–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</span>
                        </label>
                    </div>

                    <div class="input-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="showExplicitToggle" name="show_explicit">
                            <span>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–∫—Å–ø–ª–∏—Ü–∏—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="cancel-btn" onclick="closeModal('settingsModal')">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <button class="modal-close" onclick="closeModal('notificationsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="notificationsList">
                    <div class="notification-item">
                        <div class="notification-content">
                            <p>–ù–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º </body> -->

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—á–µ—Ä–µ–¥–∏ -->
    <div id="queueModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–û—á–µ—Ä–µ–¥—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</h3>
                <button class="modal-close" onclick="closeModal('queueModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="queue-container" id="queueContainer"></div>
                <div class="modal-actions">
                    <button class="btn-danger" onclick="clearQueue()">–û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å</button>
                    <button class="btn-secondary" onclick="closeModal('queueModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–∞–º–∏ -->
    <div id="themesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏</h3>
                <button class="modal-close" onclick="closeModal('themesModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="themesContainer"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–º—ã -->
    <div id="themeCreatorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞—Ç—å —Ç–µ–º—É</h3>
                <button class="modal-close" onclick="closeModal('themeCreatorModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="themeCreatorForm" class="theme-creator">
                    <div class="input-group">
                        <label for="themeName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã</label>
                        <input type="text" id="themeName" required>
                    </div>

                    <div class="color-picker">
                        <div class="color-input">
                            <label for="bgPrimary">–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω</label>
                            <input type="color" id="bgPrimary" value="#0a0a0a">
                        </div>
                        <div class="color-input">
                            <label for="bgSecondary">–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ñ–æ–Ω</label>
                            <input type="color" id="bgSecondary" value="#141414">
                        </div>
                        <div class="color-input">
                            <label for="textPrimary">–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç</label>
                            <input type="color" id="textPrimary" value="#ffffff">
                        </div>
                        <div class="color-input">
                            <label for="textSecondary">–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
                            <input type="color" id="textSecondary" value="#a0a0a0">
                        </div>
                        <div class="color-input">
                            <label for="accent">–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç</label>
                            <input type="color" id="accent" value="#ff6b6b">
                        </div>
                        <div class="color-input">
                            <label for="success">–¶–≤–µ—Ç —É—Å–ø–µ—Ö–∞</label>
                            <input type="color" id="success" value="#4ecdc4">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="themeBackground">–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL)</label>
                        <input type="url" id="themeBackground" placeholder="https://example.com/background.jpg">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–º—É</button>
                        <button type="button" class="btn-secondary"
                            onclick="closeModal('themeCreatorModal')">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="/static/js/script.js"></script>
</body>

</html>